---
title: "S2S UPI Intent"
description: "Enable direct UPI payments without redirection using EximPe’s server-to-server UPI intent flow"
---

# Introduction

The Server-to-Server (S2S) UPI Intent integration eliminates redirection hops by initiating transactions from your backend. Deliver a seamless checkout experience while maintaining control and confidence for your customers.

<CardGroup cols={3}>
  <Card title="No Redirect Hops" icon="arrow-right" href="#step-1-initiate-payment">
    Initiate transactions directly from your server to improve user experience
  </Card>
  <Card title="Flexible Intent Invocation" icon="phone" href="#step-2-invoke-upi-intent">
    Support both generic and app-specific UPI intents on mobile web and Android apps
  </Card>
  <Card title="Robust Server Callbacks" icon="server" href="#step-4-server-to-server-callback">
    Receive asynchronous status updates via server-to-server callbacks
  </Card>
</CardGroup>

### Intent Invocation

Intent invocation is simply the act of packaging your UPI payment details (amount, payee VPA, reference, etc.) into a deep-link URI and then launching the user’s UPI app directly from your front end. With a **specific intent**, you target a known app (e.g. Google Pay), while a **generic intent** lets Android show an app picker (on iOS it falls back to the default handler), all without bouncing users through extra web redirects.

## Prerequisites

Before you begin, ensure you have:

- **Merchant Key & Salt**: Your EximPe merchant key and salt for hash generation.
- **Callback URL**: A publicly accessible URL configured in your EximPe dashboard for server-to-server callbacks.
- **cURL or HTTP Client**: Capability to make HTTPS `POST` and `GET` requests from your server.
- **UPI Knowledge**: Familiarity with UPI intent URL parameters and encoding.

The following steps allow you to integrate the server-to-server UPI intent:

1. **Initiate payment**
2. **Invoke UPI Intent on customer’s device**
3. **Check UPI transaction status**
4. **EximPe sends Server-to-Server callback response**

   ### **Process flow**

   ![image.png](/images/image.png)

## Step 1: Initiate payment

#### Sample UPI Collection Request Body

```json
{
  "amount": "1000.00",
  "collection_mode": "s2s",
  "upi_flow_type": "intent",
  "currency": "INR",
  "reference_id": "S2SI_U8MEIT",
  "mop_type": "upi",
  "buyer": {
    "name": "John Doe",
    "email": "john.doe@example.com",
    "phone": "+919876543210",
    "address": {
      "line_1": "123 Main Street",
      "line_2": "Apt 4B",
      "city": "City",
      "state": "State",
      "postal_code": "123456"
    },
    "ip_address": "192.168.1.100",
    "user_agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36"
  },
  "product": {
    "name": "Sample Product",
    "description": "This is a sample product description",
    "hs_code": "98051000",
    "hs_code_description": "Portable automatic data processing machines",
    "type_of_goods": "goods"
  },
  "invoice": {
    "number": "INV_V9TZZ3",
    "date": "2025-07-08"
  }
}
```

<Note>
  For the S2S UPI Intent request, you must include these additional parameters beyond the standard checkout fields:

  - `collection_mode`: must be set to `"s2s"`
  - `upi_flow_type`: must be set to `"intent"`
  - `buyer.ip_address`: the customer’s device IP address
  - `buyer.user_agent`: the customer’s browser or app user-agent string
</Note>

### S2S UPI Intent Response

```json
{
  "success": true,
  "message": "S2S UPI Request created successfully",
  "data": {
    "intent_uri": "pa=kk.payutest@hdfcbank&pn=&tr=403993715534292371&tid=PPPL403993715534292371080725205418&am=1000.00&cu=INR&tn=UPIIntent",
    "order_id": "OD2000992103"
  }
}
```

For S2S UPI Intent mode, the response includes:

- `order_id`: Unique order identifier
- `intent_uri`: UPI intent link that can be used to open UPI apps directly

**Explanation of URL Arguments**

| Argument | Example Value   | Required | Description                                                                                      |
| -------- | --------------- | -------- | ------------------------------------------------------------------------------------------------ |
| `pa`     | `merchant@bank` | Yes      | Payee VPA (Virtual Payment Address) — the merchant's UPI ID that will receive the payment        |
| `pn`     | `Merchant Name` | Yes      | Payee Name — the display name of the merchant                                                    |
| `am`     | `100.00`        | No       | Amount — the payment amount (decimal, up to two places)                                          |
| `cu`     | `INR`           | Yes      | Currency — must be `INR` for Indian rupees                                                       |
| `tr`     | `TXN12345`      | Yes      | Transaction Reference ID — unique identifier for this transaction (for reconciliation)           |
| `tid`    | `TXNID98765`    | No       | Transaction ID — a unique transaction ID (sometimes required by specific apps, e.g., Google Pay) |
| `tn`     | `Order Payment` | No       | Transaction Note — a short note or description for the payment                                   |

### Step 2: Invoke UPI Intent on Customer’s Device

The method for invoking a UPI payment depends on the customer's operating system. Android uses intent-based deep links for better reliability and fallback, while iOS relies on specific URL schemes.

#### Android (Chrome Intent-Based)

On Android, it is highly recommended to use the **Intent URL format**. This method allows you to target a specific UPI app directly from the browser.

**Format:**
```
intent://pay?<upi_params>#Intent;scheme=upi;package=<package_name>;end;
```

**Examples:**

<CodeGroup>
```text Google Pay
intent://pay?pa=merchant@bank&pn=Merchant&am=1.00&cu=INR&tr=TXN123#Intent;scheme=upi;package=com.google.android.apps.nbu.paisa.user;end;
```

```text PhonePe
intent://pay?pa=merchant@bank&pn=Merchant&am=1.00&cu=INR&tr=TXN123#Intent;scheme=upi;package=com.phonepe.app;end;
```

```text BHIM
intent://pay?pa=merchant@bank&pn=Merchant&am=1.00&cu=INR&tr=TXN123#Intent;scheme=upi;package=in.org.npci.upiapp;end;
```

```text Paytm
intent://pay?pa=merchant@bank&pn=Merchant&am=1.00&cu=INR&tr=TXN123#Intent;scheme=upi;package=net.one97.paytm;end;
```
</CodeGroup>

| UPI App      | Android Package Name                     |
| ------------ | ---------------------------------------- |
| Google Pay   | `com.google.android.apps.nbu.paisa.user` |
| PhonePe      | `com.phonepe.app`                        |
| BHIM         | `in.org.npci.upiapp`                     |
| Paytm        | `net.one97.paytm`                        |
| Amazon Pay   | `in.amazon.mShop.android.shopping`       |
| WhatsApp     | `com.whatsapp`                           |
| CRED         | `com.dreamplug.androidapp`               |
| Supermoney   | `money.super.payments`                   |
| Fi Money     | `com.fi.money`                           |
| Jupiter      | `money.jupiter`                          |
| Slice        | `indwin.c3.shareapp`                     |

#### iOS (URL Schemes)

On iOS, you must use specific URL schemes to launch each app. If you want to show a generic picker, you can use the `upi://` scheme, though its behavior depends on the default handler set on the device.

**Examples:**

<CodeGroup>
```text Google Pay
gpay://upi/pay?pa=merchant@bank&pn=Merchant&am=1.00&cu=INR&tr=TXN123
```

```text PhonePe
phonepe://upi/pay?pa=merchant@bank&pn=Merchant&am=1.00&cu=INR&tr=TXN123
```

```text BHIM
bhim://upi/pay?pa=merchant@bank&pn=Merchant&am=1.00&cu=INR&tr=TXN123
```

```text Paytm
paytmmp://upi/pay?pa=merchant@bank&pn=Merchant&am=1.00&cu=INR&tr=TXN123
```
</CodeGroup>

| UPI App      | iOS URL Scheme Prefix |
| ------------ | --------------------- |
| BHIM         | `bhim://upi/pay?`     |
| Google Pay   | `gpay://upi/pay?`     |
| PhonePe      | `phonepe://upi/pay?`  |
| Paytm        | `paytmmp://upi/pay?`  |
| Amazon Pay   | `amazonpay://upi/pay?`|
| CRED         | `credpay://upi/pay?`  |
| Supermoney   | `super://pay?`        |
| Fi Money     | `fi://upi/pay?`       |
| Jupiter      | `jupiter://upi/pay?`  |
| Slice        | `slice://upi/pay?`    |
| Generic      | `upi://pay?`          |

<Note>
  **Pro Tip:** For the best user experience, detect the user's OS via the User-Agent and dynamically generate the appropriate link. Always provide a "Copy UPI ID" or "Generic UPI" option as a fallback.
</Note>

### Step 3: Check UPI Transaction Status

Invoke the **Order Status API** to retrieve the status of the UPI transaction:

```bash [expandable]
curl -X GET https://api-pacb.eximpe.com/pg/orders/{order_id}/status/ \
  -H "X-Client-ID: YOUR_CLIENT_ID" \
  -H "X-Client-Secret: YOUR_CLIENT_SECRET"
```

<Note>
  For detailed parameters and response formats, see the [Get Order API](https://docs.eximpe.com/api-reference/order/get)
</Note>

### Step 4: EximPe sends webhook response

EximPe can also send a webhook response whenever the transaction status gets updated.

For more information, see the [Payment Successful response](https://docs.eximpe.com/api-reference/webhooks/payment-successful)


---