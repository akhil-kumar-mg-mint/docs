import { divisions } from '@mintlify/validation';
import { generatePathToBreadcrumbsMapRecursive } from './generatePathToBreadcrumbsMap.js';
export function generatePathToBreadcrumbsMapForDocsConfig(navigation) {
    const pathToBreadcrumbs = new Map();
    generatePathToBreadcrumbsMapForDocsConfigRecursive(navigation, pathToBreadcrumbs, []);
    return pathToBreadcrumbs;
}
function generatePathToBreadcrumbsMapForDocsConfigRecursive(nav, map, currentBreadcrumbs = []) {
    if ('groups' in nav) {
        for (const group of nav.groups) {
            generatePathToBreadcrumbsMapRecursive(group, currentBreadcrumbs, map);
        }
        return;
    }
    for (const key of divisions) {
        if (key in nav) {
            const items = nav[key];
            if (!Array.isArray(items)) {
                continue;
            }
            for (const item of items) {
                let divisionTitle = '';
                // We purposely exclude `versions` and `languages` here to avoid
                // cluttering the breadcrumbs unneccessarily.
                if (key === 'dropdowns' && 'dropdown' in item && typeof item.dropdown === 'string') {
                    divisionTitle = item.dropdown;
                }
                else if (key === 'tabs' && 'tab' in item && typeof item.tab === 'string') {
                    divisionTitle = item.tab;
                }
                else if (key === 'anchors' && 'anchor' in item && typeof item.anchor === 'string') {
                    divisionTitle = item.anchor;
                }
                const newBreadcrumbs = divisionTitle
                    ? [...currentBreadcrumbs, divisionTitle]
                    : currentBreadcrumbs;
                generatePathToBreadcrumbsMapForDocsConfigRecursive(item, map, newBreadcrumbs);
            }
        }
    }
}
